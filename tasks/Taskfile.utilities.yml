version: '3'

vars:
  N8N_URL: http://localhost:5678

tasks:
  shell:
    desc: "Open shell in N8N container"
    cmds:
      - docker-compose exec n8n bash

  shell:db:
    desc: "Open PostgreSQL shell"
    cmds:
      - docker-compose exec postgres psql -U n8n -d n8n

  health:
    desc: "Check system health"
    cmds:
      - echo "ğŸ” Checking N8N..."
      - curl -f {{.N8N_URL}}/healthz || echo "âŒ N8N not healthy"
      - echo "ğŸ” Checking PostgreSQL..."
      - docker-compose exec postgres pg_isready -U n8n || echo "âŒ PostgreSQL not healthy"
      - echo "ğŸ” Checking Cursor CLI..."
      - cursor-agent --version || echo "âŒ Cursor CLI not available"
      - echo "âœ… Health check complete"
